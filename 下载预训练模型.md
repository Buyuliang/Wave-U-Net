# 下载预训练模型

## 问题

如果您看到以下错误：
```
Not found: checkpoints/full_44KHz; No such file or directory
```

说明预训练模型文件不存在，需要先下载。

## 下载步骤

### 方法 1: 使用浏览器下载

1. 访问以下链接下载预训练模型：
   https://www.dropbox.com/s/oq0woy3cmf5s8y7/models.zip?dl=1

2. 解压下载的 `models.zip` 文件

3. 将解压后的文件夹内容复制到项目的 `checkpoints/` 目录

4. 确保目录结构如下：
   ```
   checkpoints/
   ├── full_44KHz/
   │   └── full_44KHz-236118 (模型文件)
   ├── baseline_stereo/
   └── full_multi_instrument/
   ```

### 方法 2: 使用命令行下载（在终端中执行）

```bash
# 进入项目目录
cd /Users/apple/Desktop/myproject/audioSeparation/Wave-U-Net

# 下载模型（需要 curl 或 wget）
curl -L "https://www.dropbox.com/s/oq0woy3cmf5s8y7/models.zip?dl=1" -o models.zip

# 解压到 checkpoints 目录
unzip models.zip -d checkpoints/

# 清理下载文件
rm models.zip
```

### 方法 3: 使用 Python 下载

```bash
# 在 conda 环境中执行
/opt/anaconda3/envs/wave-unet/bin/python << EOF
import urllib.request
import zipfile
import os

url = "https://www.dropbox.com/s/oq0woy3cmf5s8y7/models.zip?dl=1"
zip_path = "models.zip"

print("正在下载预训练模型...")
urllib.request.urlretrieve(url, zip_path)

print("正在解压...")
with zipfile.ZipFile(zip_path, 'r') as zip_ref:
    zip_ref.extractall("checkpoints/")

os.remove(zip_path)
print("完成！模型已保存到 checkpoints/ 目录")
EOF
```

## 验证模型文件

下载完成后，验证模型文件是否存在：

```bash
ls -la checkpoints/full_44KHz/
```

应该看到类似以下内容：
```
full_44KHz-236118
full_44KHz-236118.index
full_44KHz-236118.meta
```

## 使用预训练模型

下载完成后，可以运行：

```bash
./run_single_audio.sh with cfg.full_44KHz \
    input_audio_path="audio_examples/The Mountaineering Club - Mallory/mix.mp3" \
    predict_only=True \
    model_save_path="checkpoints/full_44KHz/full_44KHz-236118"
```

## 可用的预训练模型

根据 README，项目提供以下预训练模型：

- **M4 (baseline_stereo)**: 基础立体声模型，用于人声分离
- **M5-HighSR (full_44KHz)**: 44.1 KHz 采样率的完整模型，最佳人声分离效果
- **M6 (full_multi_instrument)**: 多乐器分离模型

## 注意事项

- 模型文件较大（可能几百MB），下载需要一些时间
- 确保有足够的磁盘空间
- 如果下载失败，可以尝试使用浏览器直接下载
